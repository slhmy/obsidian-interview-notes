数据库规范化是一种用于设计关系型数据库的过程和一系列规则，
目的是减少数据冗余、消除数据异常（插入异常、更新异常和删除异常），
并增强数据的完整性和一致性。
简单来说，就是让数据库的结构更加合理、高效地存储和管理数据。

## 函数依赖

用代数的方式来表达属性集之间的依赖关系，是数据库规范化理论的基础。
函数依赖的种类分为：

- **完全函数依赖**
- **部分函数依赖**
- **传递函数依赖**

> [!quote]
> 我不爱代数，这里就不多做详细解释了

另外有个名词 **平凡传递依赖** 会在学习 BCNF 时用到（Y ⊆ X，X → Y）

## 异常

- **数据冗余**
- **修改异常**：修改了一个记录中的信息，但是另一个记录中相同的信息却没有被修改
  > [!tip]
  > 如果学生的姓名发生了变化，那么需要在多条记录中更新该学生的姓名
- **删除异常**：删除一个信息，那么也会丢失其它信息
- **插入异常**：插入新的数据时，如果由于表的结构设计不合理，导致无法插入某些合理的数据
  > [!tip]
  > 想要插入一个学生的信息，如果这个学生还没选课，那么就无法插入

## 键

键是一个表中的一列或一组列，用于唯一地标识表中的记录或者建立表与表之间的关联。
和键有关的术语如下：

- **主键**：其值能唯一地标识表中的每一行记录
- **外键**：它的值与另一个表（通常是父表）的主键相对应
- **候选键**：一个表可能有多个候选键，除了被选定作为主键的候选键之外，其他候选键也具有能够唯一标识记录的特性
  > [!tip]
  > 在一个员工信息表中，如果 “员工编号” 是主键，
  > “身份证号码” 也可以唯一标识员工记录，那么 “身份证号码” 就是候选键。
- **超键**：可能包含了多余的属性，超键的范围比候选键更宽泛

## 范式

> [!quote]
> 这块内容真的给我的理解带来了很大的困扰，中文版定义良莠不齐，
> 建议大家多看英文版的 Wikipedia
>
> 中文案例推荐阅读 [数据库三范式和BCNF范式的理解：生动举例](https://blog.csdn.net/weixin_43954951/article/details/125494783)

数据库范式（Normal Forms in Database）是设计关系型数据库时，为了减少数据冗余、避免数据不一致性等问题而遵循的一系列规则。

- **第一范式（1NF）**：关系中的每个属性（列）都是不可再分的原子值
- **第二范式（2NF）**：在满足 1NF 的基础上，非主属性完全依赖于主键
- **第三范式（3NF）**：在满足 2NF 的基础上，任何非主属性不传递依赖于主键
- **巴克斯范式（BCNF or 3.5 NF）**：在满足 3NF 的基础上，要求如果有 X → Y，
  那么至少需要满足：

  - Y 平凡依赖于 X
  - X 是超键

  这两条中的其中一条。
  违反 BCNF 的例子由两个重叠的候选键组成（{X, Z} 和 {Y, Z} 是候选键，而 Y 又不包含于 X）,
  这会导致表中有多条重复的 {X, Y} 记录，而此时如果修改 Y，就会导致修改异常

> [!note]
> 数据库范式仅仅是在数据关系上的较优解，
> 而在实际使用数据库时，还会受其它因素影响
> （如两个字段时常会一同查询，于是就算可能会破坏范式，将它们放在同一张表中时也可以提高查询效率）
